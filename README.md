# 📏 PUBG Distance Calculator (Hybrid Edition)

**PUBG 高性能测距工具 - 双模混合版**

这是一个基于 **.NET 8** 开发的现代化 PUBG 测距工具。它采用了 **WinForms + ImGui** 的混合架构：使用 WinForms 作为常驻后台的启动器，使用 ImGui (DirectX/OpenGL) 作为高性能、低延迟的透明绘图层。

与传统的 GDI+ 工具相比，本项目利用 GPU 加速渲染，线条丝滑无锯齿，完美支持 2K/4K 高分辨率，且对游戏帧数影响几乎为零。
## ✨ 核心特性 (Features)

*   **双模架构 (Hybrid Architecture)**：
    *   **启动器 (WinForms)**：轻量级常驻后台，负责进程管理，随用随开，无需反复重启软件。
    *   **渲染层 (ImGui Overlay)**：高性能 GPU 绘图，支持真·透明背景和鼠标穿透。
*   **无感交互**：按住热键显示界面，松开即隐藏并穿透鼠标，完全不干扰正常游戏操作。
*   **配置记忆**：自动保存 `100m` 像素比例。一次校准，永久使用（需保持地图缩放一致）。
*   **高清适配**：原生支持 DPI 感知，在 1080P、2K、4K 屏幕上均能精准定位。
*   **安全防误触**：右键撤销线条，Shift+右键重置配置，防止紧张时刻误操作。

## 🛠️ 安装与运行 (Installation)

1.  在 **Releases** 页面下载最新版本的压缩包。
2.  解压所有文件到同一个文件夹。
3.  以**管理员身份运行** `PUBG_CalDist.exe`。
4.  点击主界面的 **“开始测距”** 按钮。
    *   *此时主窗口会自动最小化，屏幕左上角显示 "PUBG Overlay Running" 提示。*

## 🎮 使用教程 (User Guide)

### 1. 首次校准 (Calibration)
*为了让工具知道当前地图缩放比例下的距离，首次使用需校准。*

1.  在游戏中打开地图 (`M` 键)，**将滚轮滚到最大放大倍率**（建议养成此习惯）。
2.  按住 **`Ctrl`** 键。
3.  **左键**点击地图网格标定 100m。
4.  保持按住 **`Ctrl`**，按一下 **`S`** 键保存配置。
    *   *屏幕提示 "CONFIG SAVED" 即表示成功。*

### 2. 实战测距 (Measurement)
1.  打开地图（保持最大放大倍率）。
2.  按住 **`Ctrl`** 键。
3.  **左键**点击你的位置，再点击敌人的位置。
4.  屏幕即时显示距离（如 `345 m`）。松开 `Ctrl` 键后距离显示保留，不影响开枪。

### 3. 关闭与重启 (Lifecycle)
*   **暂时关闭**：按住 **`Ctrl`** + **`~` (反引号)**。
    *   *效果：Overlay 绘图层关闭，资源释放。WinForms 主程序依然在后台/任务栏运行。*
*   **再次使用**：点击任务栏的软件图标，再次点击 **“开始测距”** 即可瞬间启动。
*   **彻底退出**：关闭 WinForms 主窗口。

## ⌨️ 快捷键列表 (Hotkeys)

| 快捷键 | 作用 | 说明 |
| :--- | :--- | :--- |
| **按住 Ctrl** | **激活测距模式** | 只有按住时才能点击画线，松开后鼠标穿透游戏 |
| **Ctrl + S** | **保存配置** | 将当前的校准数据保存到本地，下次无需校准 |
| **鼠标右键** | **撤销线条** | 清除当前的红线或黄线（不删除配置） |
| **Shift + 右键** | **重置校准** | **强制归零**，删除配置，重新进入校准模式 |
| **Ctrl + `** (反引号) | **关闭 Overlay** | 关闭绘图层，返回 WinForms 待机模式 |

## ⚠️ 注意事项 (Notes)

1.  **地图缩放规则**：
    由于 PUBG 地图缩放是无级调节的，**请务必保证“测距时”的地图放大倍率与“校准时”一致**。
    > **强烈建议**：每次打开地图后，习惯性将滚轮滚到最大，这样能保证 100% 准确。
2.  **管理员权限**：
    由于 PUBG 具有较高权限，请务必以**管理员身份**运行本工具，否则绘图层可能会被游戏窗口遮挡。
3.  **全屏模式**：
    请确保游戏设置为 **“无边框窗口 (Borderless)”** 或 **“窗口化”** 模式。全屏独占模式会导致 Overlay 无法显示。

## 💻 开发环境 (Build)

*   **IDE**: Visual Studio 2022
*   **Framework**: .NET 8.0
*   **Dependencies**:
    *   `ImGui.NET` (绘图核心)
    *   `ClickableTransparentOverlay` (窗口管理)
    *   `System.Windows.Forms` (启动器 UI)

---

**Enjoy your Chicken Dinner! 🍗**